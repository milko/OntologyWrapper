<html>
    <head>
        <script
            type="text/javascript"
            src="../../js/jquery-1.4.2.min.js">
        </script>
        <script
            type="text/javascript"
            src="../../syntax_highlighter/scripts/shCore.js">
        </script>
        <script
            type="text/javascript"
            src="../../syntax_highlighter/scripts/shBrushJScript.js">
        </script>
        <script
            type="text/javascript"
            src="../../syntax_highlighter/scripts/shBrushPhp.js">
        </script>
        <script
            type="text/javascript"
            src="../../syntax_highlighter/scripts/shBrushXml.js">
        </script>
        <link
            href="../../syntax_highlighter/styles/shCore.css" rel="stylesheet"
            type="text/css"
        />
        <link
            href="../../syntax_highlighter/styles/shCoreEclipse.css"
            rel="stylesheet" type="text/css"
        />
        <link
            href="../../syntax_highlighter/styles/shThemeWordpress.css"
            rel="stylesheet" type="text/css"
        />
    </head>
    <body>
        <pre class="brush: php">&lt;?php

/**
 * MongoServer.php
 *
 * This file contains the definition of the {@link MongoServer} class.
 */

namespace OntologyWrapper;

use OntologyWrapper\ServerObject;

/*=======================================================================================
 *																						*
 *									MongoServer.php										*
 *																						*
 *======================================================================================*/

/**
 * Mongo server
 *
 * This class is a &lt;i&gt;concrete&lt;/i&gt; implementation of the {@link ServerObject} wrapping a
 * {@link MongoClient} class.
 *
 *	@author		Milko A. &Scaron;kofiƒç &lt;m.skofic@cgiar.org&gt;
 *	@version	1.00 06/02/2014
 */
class MongoServer extends ServerObject
{
		

/*=======================================================================================
 *																						*
 *							PUBLIC CONNECTION MANAGEMENT INTERFACE						*
 *																						*
 *======================================================================================*/


	 
	/*===================================================================================
	 *	isConnected																		*
	 *==================================================================================*/

	/**
	 * Check if connection is open
	 *
	 * We overload this method to assume the object is connected if the resource is a
	 * {@link MongoClient}.
	 *
	 * @access public
	 * @return boolean				&lt;tt&gt;TRUE&lt;/tt&gt; is open.
	 */
	public function isConnected()
	{
		return ( $this-&gt;mConnection instanceof \MongoClient );						// ==&gt;
	
	} // isConnected.

	 
	/*===================================================================================
	 *	getStatistics																	*
	 *==================================================================================*/

	/**
	 * Return statistics
	 *
	 * This method will return the following values:
	 *
	 * &lt;ul&gt;
	 *	&lt;li&gt;&lt;tt&gt;FALSE&lt;/tt&gt;: The server is not connected.
	 *	&lt;li&gt;&lt;tt&gt;array&lt;/tt&gt;: The server statistics.
	 * &lt;/ul&gt;
	 *
	 * @access public
	 * @return array				Server statistics or &lt;tt&gt;FALSE&lt;/tt&gt;.
	 */
	public function getStatistics()
	{
		//
		// Check if connected.
		//
		if( $this-&gt;isConnected() )
			return $this-&gt;mConnection-&gt;getConnections();							// ==&gt;
		
		return FALSE;																// ==&gt;
	
	} // getStatistics.

		

/*=======================================================================================
 *																						*
 *								PROTECTED CONNECTION INTERFACE							*
 *																						*
 *======================================================================================*/


	 
	/*===================================================================================
	 *	connectionOpen																	*
	 *==================================================================================*/

	/**
	 * Open connection
	 *
	 * This method will instantiate a {@link MongoClient} object and set it in the
	 * mConnection data member.
	 *
	 * This method expects the caller to have checked whether the connection is already
	 * open.
	 *
	 * If the operation fails, the method will raise an exception.
	 *
	 * @access protected
	 * @return mixed				The native connection.
	 */
	protected function connectionOpen()
	{
		//
		// Load parameters.
		//
		$params = $this-&gt;getArrayCopy();
		if( array_key_exists( kTAG_CONN_OPTS, $params ) )
		{
			$options = $params[ kTAG_CONN_OPTS ];
			unset( $params[ kTAG_CONN_OPTS ] );
		}
		else
			$options = NULL;
		
		//
		// Build data source name.
		//
		$dsn = $this-&gt;parseOffsets( $params );
		
		//
		// Set client.
		//
		$this-&gt;mConnection = ( $options !== NULL )
						   ? new \MongoClient( $dsn, $options )
						   : new \MongoClient( $dsn );
		
		return $this-&gt;mConnection;													// ==&gt;
	
	} // connectionOpen.

	 
	/*===================================================================================
	 *	connectionClose																	*
	 *==================================================================================*/

	/**
	 * Close connection
	 *
	 * We overload this method to reset the connection resource.
	 *
	 * @access protected
	 */
	protected function connectionClose()					{	$this-&gt;mConnection = NULL;	}

		

/*=======================================================================================
 *																						*
 *								PROTECTED CONNECTION INTERFACE							*
 *																						*
 *======================================================================================*/


	 
	/*===================================================================================
	 *	newDatabase																		*
	 *==================================================================================*/

	/**
	 * Return a new database instance
	 *
	 * This method should implemented by concrete derived classes, it expects a list of
	 * offsets which include server information and should use them to instantiate a
	 * {@link DatabaseObject} instance.
	 *
	 * Derived classes must implement this method.
	 *
	 * @param array					$theOffsets			Full database offsets.
	 * @param boolean				$doOpen				&lt;tt&gt;TRUE&lt;/tt&gt; open connection.
	 *
	 * @access protected
	 * @return DatabaseObject		Database instance.
	 */
	protected function newDatabase( $theOffsets, $doOpen = TRUE )
	{
		//
		// Instantiate database.
		//
		$database = new MongoDatabase( $theOffsets );
		
		//
		// Set data dictionary.
		//
		$database-&gt;dictionary( $this-&gt;dictionary() );
		
		//
		// Open connection.
		//
		if( $doOpen )
			$database-&gt;openConnection();
		
		return $database;															// ==&gt;
	
	} // newDatabase;

	 

} // class MongoServer.


?&gt;
</pre>
        <script type="text/javascript">
             SyntaxHighlighter.all();
             jQuery('.gutter div').each(function(key, data){
                jQuery(data).prepend('<a name="L'+jQuery(data).text()+'"/>');
             });
        </script>
    </body>
</html>