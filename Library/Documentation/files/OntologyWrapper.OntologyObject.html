<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Ontology Wrapper</title><link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet"></link><link rel="stylesheet" href="../css/template.css" type="text/css"></link><script type="text/javascript" src="../js/jquery-1.7.1.min.js"></script><script type="text/javascript" src="../js/bootstrap.min.js"></script><script type="text/javascript" src="../js/template.js"></script></head><body><div id="content"><h1 class="file">OntologyWrapper/OntologyObject.php<a href="../source/OntologyWrapper/OntologyObject.php.html" role="button" class="pull-right btn btn-default"><i class="fa fa-2x fa-code"></i></a></h1><div id="file-nav-box"><div id="file-nav-options">
              Show:
              <img src="../images/icons/visibility_public.png" alt="Public" id="show-public"></img><img src="../images/icons/visibility_protected.png" alt="Protected" id="show-protected"></img><img src="../images/icons/visibility_private.png" alt="Private" id="show-private"></img><span class="attribute" id="show-inherited">inherited</span></div><div id="file-nav-container"><ul id="file-nav"><li><a href="#classes"><img src="../images/icons/class.png" alt="Class" height="14"></img>
                          Classes
                      </a><ul><li><a href="#\OntologyWrapper\OntologyObject">\OntologyWrapper\OntologyObject</a></li></ul></li></ul><div style="clear: left;"></div></div><div id="file-nav-tab">
              Table of Contents
          </div></div><a name="top" class="anchor"></a><div id="file-description"><div class="short-description">OntologyObject.php</div><div class="long-description">This file contains the definition of the {@link OntologyObject} class.</div></div><a name="classes" class="anchor"></a><a id="\OntologyWrapper\OntologyObject" class="anchor"></a><h2 class="class">\OntologyWrapper\OntologyObject<div class="to-top"><a href="#top">jump to top</a></div></h2><div class="class"><small class="package"><b>Package: </b>Default</small><div class="short-description">Ontology object</div><div class="long-description">Objects derived from this <i>abstract</i> class hold two types of data:

<ul>
<li><em>Run-time data</em>, which is stored in the object member properties.
<li><em>Persistent data</em>, which is stored in the inherited array part of the object.
</ul>

The main purpose of this class is to ensure that all persistent data elements are
<i>referenced</i>, <i>annotated</i> and <i>documented</i> in an ontology.

Persistent data is stored as <i>key/value</i> pair elements of the inherited array, the
key part of the elements we call by convention <em>offset</em>, these offsets, in this
class, represent a reference to an object of the ontology that holds all the necessary
information to <i>identify</i>, <i>describe</i> and <i>validate</i> the value part of the
array element pairs.

This class implements the bridge between object persistent data and the ontology,
ensuring that all data holds a reference to the ontology, which, itself, is implemented
by objects derived from this same class: this means that the whole system is self
sufficient and self documenting.

Offsets can be uniquely identified in two ways: by native identifier, which is an integer
value which may change across implementations, and a global identifier, which is a sring
that will not change across implementations. This class provides a transparent interface
that allows referring to offsets both by their <i>native</i> identifier or by their
<i>global</i> identifier. Offsets, however, <em>will only hold the native
identifier</em>, which means that all persistent data offsets must be integers. This is
because global identifiers may become large strings, which poses a problem if these are
used as field names for data stored in a persistent container.

Whenever the object is provided an offset, if this is a string, it will be fed to a
protected method, {@link resolveOffset()}, which will check if the string represents the
global identifier of an ontology Tag object, in that case, the method will return the
Tag's native integer identifier which will be used as the data offset. The class
features a public method, {@link InternalOffsets()}, that returns the list of exceptions.

This means that to ensure referential integrity it is advisable to use integer constants
as offsets when available, or string offsets if the integer constant is not known or
available.

The resolution of these offsets is provided by a {@link Dictionary} object which records
all the <em>Tag</em> objects of the ontology which are the entities that all offsets
reference: persistent data offsets represent these Tag native identifiers, while these
Tag object global identifiers are decoded by the {@link Dictionary} object to retrieve
the corresponding integer native identifier.

The class declares the {@link __toString()} method as virtual, it is essential that all
derived classes implement this method which should return the current object's <em>global
identifier string</em>. The global identifier of an object can be considered its
signature or unique identifier, although a global identifier not need to be unique; all
objects derived from this class, just as the Tag object described above, must feature a
global identifier, which may or may not coincide with their native identifier.

The class declares a method, {@link reference()}, which returns the current object's
<i>reference</i>, this will generally be the value of the {@link kTAG_NID} offset. If the
offset is not set, the method will raise an exception. This method will be put to use by
derived classes: when providing an object to an offset expecting an object reference, by
using this method one can be assured the provided object does have a reference.

Finally, the</div><dl class="class-info"><dt>Parent(s)</dt><dd><a href="../files/OntologyWrapper.ContainerObject.html#\OntologyWrapper\ContainerObject">\OntologyWrapper\ContainerObject</a>
            &lt;
            \ArrayObject</dd><dt>Children</dt><dd><a href="../files/OntologyWrapper.ConnectionObject.html#\OntologyWrapper\ConnectionObject">\OntologyWrapper\ConnectionObject</a></dd><dd><a href="../files/OntologyWrapper.PersistentObject.html#\OntologyWrapper\PersistentObject">\OntologyWrapper\PersistentObject</a></dd><dt>Author</dt><dd><a href="mailto:m.skofic@cgiar.org">Milko A. Škofič</a>
         
    </dd><dt>Version</dt><dd>1.00 10/01/2014
         
    </dd></dl><h3>Properties</h3><div><a id="\OntologyWrapper\OntologyObject::$mDictionary" class="anchor"></a><div class="property protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png" alt="&gt;"></img><img src="../images/icons/arrow_down.png" alt="V" style="display: none;"></img></a><code class="title"><img src="../images/icons/property.png" alt="Property"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img>\OntologyWrapper\Dictionary <span class="highlight">$mDictionary</span> = NULL</code><div class="description"><div class="short-description">Dictionary.</div></div><div class="code-tabs"><div class="long-description">This protected data member holds the data dictionary reference.</div><strong>Default value</strong><code>NULL</code><strong>Details</strong><dl class="property-info"><dt>Type</dt><dd><a href="../files/Dictionary.html">\OntologyWrapper\Dictionary</a></dd></dl></div><div class="clear"></div></div></div><h3>Methods</h3><div><a id="\OntologyWrapper\OntologyObject::DefaultOffsets()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">DefaultOffsets</span><span class="nb-faded-text">()</span> : array</code><div class="description"><span class="attribute">static</span><p class="short_description">Return default offsets</p></div><div class="code-tabs"><div class="long-description">This method will return the current object list of default offsets, these offsets
represent the default offsets of the object, which means that all objects derived
from this class may feature these offsets. This method is used to exclude these
offsets from statistical procedures, such as {@link CollectOffsets()}, since it is
implied that these offsets will be there.

In this class we return an empty array.</div><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>array</td><td>List of default offsets.</td></tr></table><strong>Details</strong><dl class="function-info"><dt>Static</dt><dd>
         
    </dd></dl></div><div class="clear"></div></div><a id="\OntologyWrapper\OntologyObject::InternalOffsets()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">InternalOffsets</span><span class="nb-faded-text">()</span> : array</code><div class="description"><span class="attribute">static</span><p class="short_description">Return internal offsets</p></div><div class="code-tabs"><div class="long-description">This method will return the current object list of internal offsets, these offsets
are not defined in the data dictionary and are private to the object. This method
is used to exclude these offsets from the default offset resolution workflow.

In this class we return {@link kTAG_NID} and {@link kTAG_CLASS}, which all persistent
objects share.</div><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>array</td><td>List of internal offsets.</td></tr></table><strong>Details</strong><dl class="function-info"><dt>Static</dt><dd>
         
    </dd></dl></div><div class="clear"></div></div><a id="\OntologyWrapper\OntologyObject::__toString()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">__toString</span><span class="nb-faded-text">()</span> : string</code><div class="description"><span class="attribute">abstract</span><p class="short_description"><h4>Return global identifier</h4></p></div><div class="code-tabs"><div class="long-description">This method should return the current object's global identifier.

All derived concrete classes must implement this method.</div><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>string</td><td>The global identifier.</td></tr></table><strong>Details</strong><dl class="function-info"><dt>Access</dt><dd>public
         
    </dd></dl></div><div class="clear"></div></div><a id="\OntologyWrapper\OntologyObject::castOffsetValue()" class="anchor"></a><div class="method protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img><span class="highlight">castOffsetValue</span><span class="nb-faded-text">(<a href="../files/reference.html">\OntologyWrapper\reference</a> $theValue, mixed $theOffset, boolean $doAssert = FALSE)</span> : void</code><div class="description"><p class="short_description">Cast offset</p></div><div class="code-tabs"><div class="long-description">This method can be used to cast a value to the data type of its referred Tag.

The method will first resolve the offset into a Tag and then it will use the Tag's
data type to cast the value.

The value will be cast only if the Tag has <em>one</em> data type, if the provided
value is an array, the method will cast each element to that data type.

If the method is unable to resolve the offset and the assert flag parameter is set,
the method will raise an exception.

This method will handle in-line the data types of a series of default tags, this is
necessary when loading the default ontology for the first time: since there are no
tags in the system yet, any attempt to resolve these tags would fail; if you plan on
changing the data type of default tags, you should edit this method accordingly.</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$theValue</th><td><a href="../files/reference.html">\OntologyWrapper\reference</a></td><td><em><p>Value to cast.</p></em></td></tr><tr><th>$theOffset</th><td>mixed</td><td><em><p>Data offset.</p></em></td></tr><tr><th>$doAssert</th><td>boolean</td><td><em><p>Assert offset tag reference.</p></em></td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td><a href="../files/Exception.html">\OntologyWrapper\Exception</a></td><td><em></em></td></tr></table><strong>Details</strong><dl class="function-info"><dt>Access</dt><dd>protected
         
    </dd></dl></div><div class="clear"></div></div><a id="\OntologyWrapper\OntologyObject::dictionary()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">dictionary</span><span class="nb-faded-text">(mixed $theDictionary = NULL, boolean $getOld = FALSE)</span> : <a href="../files/Dictionary.html">\OntologyWrapper\Dictionary</a></code><div class="description"><p class="short_description">Set or return data dictionary</p></div><div class="code-tabs"><div class="long-description">This method can be used to set or retrieve the object's data dictionary, which is
required by all derived objects to resolve offsets.

You should set this data member as soon as the object has been instantiated, before
adding offsets to it.

The method expects the following parameters:

<ul>
<li><b>$theDictionary</b>: Data dictionary or operation:
 <ul>
	<li><tt>NULL</tt>: Return current dictionary.
	<li><tt>{@link Dictionary}</tt>: Set dictionary with provided value.
 </ul>
<li><b>$getOld</b>: This parameter is a boolean which if <tt>TRUE</tt> will return
	the <i>old</i> dictionary when replacing, if <tt>FALSE</tt>, it will return the
	current value.
</ul>

The method will raise an exception if the dictionary holds any other type except the
above.</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$theDictionary</th><td>mixed</td><td><em><p>New dictionary or <tt>NULL</tt>.</p></em></td></tr><tr><th>$getOld</th><td>boolean</td><td><em><tt>TRUE</tt> get old value.</em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td><a href="../files/Dictionary.html">\OntologyWrapper\Dictionary</a></td><td>Object data dictionary.</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td><a href="../files/Exception.html">\OntologyWrapper\Exception</a></td><td><em></em></td></tr></table><strong>Details</strong><dl class="function-info"><dt>Access</dt><dd>public
         
    </dd></dl></div><div class="clear"></div></div><a id="\OntologyWrapper\OntologyObject::preOffsetExists()" class="anchor"></a><div class="method protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img><span class="highlight">preOffsetExists</span><span class="nb-faded-text">(<a href="../files/reference.html">\OntologyWrapper\reference</a> $theOffset)</span> : mixed</code><div class="description"><p class="short_description">Handle offset before checking it</p></div><div class="code-tabs"><div class="long-description">In this class we resolve the offset.</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$theOffset</th><td><a href="../files/reference.html">\OntologyWrapper\reference</a></td><td><em><p>Offset reference.</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>mixed</td><td>&lt;tt&gt;NULL&lt;/tt&gt; check offset, other, return.</td></tr></table><strong>Details</strong><dl class="function-info"><dt>Access</dt><dd>protected
         
    </dd><dt>Uses</dt><dd><a href="../files/
                         resolveOffset()"></a>
         
    </dd></dl></div><div class="clear"></div></div><a id="\OntologyWrapper\OntologyObject::preOffsetGet()" class="anchor"></a><div class="method protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img><span class="highlight">preOffsetGet</span><span class="nb-faded-text">(<a href="../files/reference.html">\OntologyWrapper\reference</a> $theOffset)</span> : mixed</code><div class="description"><p class="short_description">Handle offset before getting it</p></div><div class="code-tabs"><div class="long-description">In this class we resolve the offset.</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$theOffset</th><td><a href="../files/reference.html">\OntologyWrapper\reference</a></td><td><em><p>Offset reference.</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>mixed</td><td>&lt;tt&gt;NULL&lt;/tt&gt; get offset value, other, return.</td></tr></table><strong>Details</strong><dl class="function-info"><dt>Access</dt><dd>protected
         
    </dd><dt>Uses</dt><dd><a href="../files/
                         resolveOffset()"></a>
         
    </dd></dl></div><div class="clear"></div></div><a id="\OntologyWrapper\OntologyObject::preOffsetSet()" class="anchor"></a><div class="method protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img><span class="highlight">preOffsetSet</span><span class="nb-faded-text">(<a href="../files/reference.html">\OntologyWrapper\reference</a> $theOffset, <a href="../files/reference.html">\OntologyWrapper\reference</a> $theValue)</span> : mixed</code><div class="description"><p class="short_description">Handle offset and value before setting it</p></div><div class="code-tabs"><div class="long-description">In this class we resolve the offset.</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$theOffset</th><td><a href="../files/reference.html">\OntologyWrapper\reference</a></td><td><em><p>Offset reference.</p></em></td></tr><tr><th>$theValue</th><td><a href="../files/reference.html">\OntologyWrapper\reference</a></td><td><em><p>Offset value reference.</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>mixed</td><td>&lt;tt&gt;NULL&lt;/tt&gt; set offset value, other, return.</td></tr></table><strong>Details</strong><dl class="function-info"><dt>Access</dt><dd>protected
         
    </dd><dt>Uses</dt><dd><a href="../files/
                         resolveOffset()"></a>
         
    </dd></dl></div><div class="clear"></div></div><a id="\OntologyWrapper\OntologyObject::preOffsetUnset()" class="anchor"></a><div class="method protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img><span class="highlight">preOffsetUnset</span><span class="nb-faded-text">(<a href="../files/reference.html">\OntologyWrapper\reference</a> $theOffset)</span> : mixed</code><div class="description"><p class="short_description">Handle offset and value before deleting it</p></div><div class="code-tabs"><div class="long-description">In this class we resolve the offset.</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$theOffset</th><td><a href="../files/reference.html">\OntologyWrapper\reference</a></td><td><em><p>Offset reference.</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>mixed</td><td>&lt;tt&gt;NULL&lt;/tt&gt; delete offset value, other, return.</td></tr></table><strong>Details</strong><dl class="function-info"><dt>Access</dt><dd>protected
         
    </dd><dt>Uses</dt><dd><a href="../files/
                         resolveOffset()"></a>
         
    </dd></dl></div><div class="clear"></div></div><a id="\OntologyWrapper\OntologyObject::reference()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">reference</span><span class="nb-faded-text">()</span> : mixed</code><div class="description"><p class="short_description">Return object reference</p></div><div class="code-tabs"><div class="long-description">This method will return the current object's reference. This value should uniquely
identify the referenced object, making it easy to retrieve the object given this
reference.

In this class, and generally in all classes, the reference of an object is its native
identifier, {@link kTAG_NID}.

The method must raise an exception if the reference cannot be provided.</div><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>mixed</td><td>Object reference.</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td><a href="../files/Exception.html">\OntologyWrapper\Exception</a></td><td><em></em></td></tr></table><strong>Details</strong><dl class="function-info"><dt>Access</dt><dd>public
         
    </dd></dl></div><div class="clear"></div></div><a id="\OntologyWrapper\OntologyObject::resolveOffset()" class="anchor"></a><div class="method protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img><span class="highlight">resolveOffset</span><span class="nb-faded-text">(mixed $theOffset, boolean $doAssert = FALSE)</span> : mixed</code><div class="description"><p class="short_description">Resolve offset</p></div><div class="code-tabs"><div class="long-description">This method will resolve the provided offset into a {@link Tag} native
identifier, this is done by using a {@link Dictionary} object stored in the current
object's {@link $mDictionary} data member.

If you provide an integer or a numeric string, the method will simply cast the value
to an integer and return it.

All other types of offsets, except those returned by the {@link InternalOffsets()}
method, will be used to locate the tag native identifier using a {@link Dictionary}
object stored in the current object's {@link $mDictionary} data member; if the
provided offset cannot be resolved, the method will raise an exception if the second
parameter is <tt>TRUE</tt>, or <tt>NULL</tt> if the second parameter is
<tt>FALSE</tt>.

The method will raise an exception if the tag cache is not set.</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$theOffset</th><td>mixed</td><td><em><p>Data offset.</p></em></td></tr><tr><th>$doAssert</th><td>boolean</td><td><em><p>Assert offset tag reference.</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>mixed</td><td>Resolved offset.</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td><a href="../files/Exception.html">\OntologyWrapper\Exception</a></td><td><em></em></td></tr></table><strong>Details</strong><dl class="function-info"><dt>Access</dt><dd>protected
         
    </dd><dt>Uses</dt><dd><a href="../files/
                         InternalOffsets()"></a>
         
    </dd></dl></div><div class="clear"></div></div><a id="\OntologyWrapper\OntologyObject::resolveOffsetType()" class="anchor"></a><div class="method protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img><span class="highlight">resolveOffsetType</span><span class="nb-faded-text">(int $theOffset, <a href="../files/reference.html">\OntologyWrapper\reference</a> $theType, <a href="../files/reference.html">\OntologyWrapper\reference</a> $theKind, boolean $doAssert = FALSE)</span> : mixed</code><div class="description"><p class="short_description">Resolve type</p></div><div class="code-tabs"><div class="long-description">This method will resolve the provided offset into a {@link Tag} object and return in
the provided reference parameters the data type and kind corresaponding to the
provided offset; this is done by using a {@link Dictionary} object stored in the
current object's {@link $mDictionary} data member.

This method expects the following parameters:

<ul>
<li><b>$theOffset</b>: This is the data property offset, it should represent the
	tag sequence number; if it holds an internal offset, the method will return
	<tt>NULL</tt>, regardless of the last parameter.
<li><b>$theType</b>: This parameter will receive the data type of the referenced
	tag, if the tag could not be resolved, the parameter will hold an empty array.
<li><b>$theKind</b>: This parameter will receive the data kind of the referenced
	tag, if the tag could not be resolved, or if the tag has no data kind, the
	parameter will hold an empty array.
<li><b>$doAssert</b>: If <tt>TRUE</tt> and the tag could not be resolved, the method
	will raise an exception; if the offset is an internal offset this setting has
	no effect: the method will return <tt>NULL</tt> and it will not set any type or
	kind.
</ul>

The method will raise an exception if the provided offset is not an integer, a
numeric string or part of the internal offsets.

The method will return <tt>TRUE</tt> if the tag was resolved; <tt>FALSE</tt> if the
tag was not resolved and <tt>NULL</tt> if the offset is internal.</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$theOffset</th><td>int</td><td><em><p>Tag sequence number.</p></em></td></tr><tr><th>$theType</th><td><a href="../files/reference.html">\OntologyWrapper\reference</a></td><td><em><p>Receives data type.</p></em></td></tr><tr><th>$theKind</th><td><a href="../files/reference.html">\OntologyWrapper\reference</a></td><td><em><p>Receives data kind.</p></em></td></tr><tr><th>$doAssert</th><td>boolean</td><td><em><p>Assert offset tag reference.</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>mixed</td><td>&lt;tt&gt;TRUE&lt;/tt&gt;, &lt;tt&gt;FALSE&lt;/tt&gt; or &lt;tt&gt;NULL&lt;/tt&gt;.</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td><a href="../files/Exception.html">\OntologyWrapper\Exception</a></td><td><em></em></td></tr></table><strong>Details</strong><dl class="function-info"><dt>Access</dt><dd>protected
         
    </dd><dt>Uses</dt><dd><a href="../files/
                         InternalOffsets()"></a>
         
    </dd></dl></div><div class="clear"></div></div><a id="\OntologyWrapper\OntologyObject::traverse()" class="anchor"></a><div class="method protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img><span class="highlight">traverse</span><span class="nb-faded-text">()</span> : array</code><div class="description"><p class="short_description">Traverse object</p></div><div class="code-tabs"><div class="long-description">This method will traverse the object's offsets and perform a series of actions:

<ul>
<li><em>Collect offsets</em>: The method will collect all the offsets used in the
	object returning their enumerated set. The returned array will have the tag
	sequence number as key and the list of offsets using that tag as value.
<li><em>Verify offsets</em>: The method will verify all the traversed elements.
<li><em>Cast offsets</em>: The method will cast the value of all offsets which have
	a single data type.
</ul>

Derived classes can overload the two methods that respectively verify and cast the
offsets, {@link traverseVerifyStructure()} and {@link traverseCastValue()}.</div><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>array</td><td>Object offsets.</td></tr></table><strong>Details</strong><dl class="function-info"><dt>Access</dt><dd>protected
         
    </dd></dl></div><div class="clear"></div></div><a id="\OntologyWrapper\OntologyObject::traverseCastValue()" class="anchor"></a><div class="method protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img><span class="highlight">traverseCastValue</span><span class="nb-faded-text">(<a href="../files/Iterator.html">\OntologyWrapper\Iterator</a> $theIterator, <a href="../files/reference.html">\OntologyWrapper\reference</a> $theType, <a href="../files/reference.html">\OntologyWrapper\reference</a> $theKind, string $theOffset)</span> : mixed</code><div class="description"><p class="short_description">Cast offset</p></div><div class="code-tabs"><div class="long-description">This method should cast the current element of the provided iterator to the correct
data type. This method can also be used to verify structured type elements.

The method will return <tt>TRUE</tt> if the value was cast, <tt>FALSE</tt> if not and
<tt>NULL</tt> if the offset has more than one data type.</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$theIterator</th><td><a href="../files/Iterator.html">\OntologyWrapper\Iterator</a></td><td><em><p>Iterator.</p></em></td></tr><tr><th>$theType</th><td><a href="../files/reference.html">\OntologyWrapper\reference</a></td><td><em><p>Data type.</p></em></td></tr><tr><th>$theKind</th><td><a href="../files/reference.html">\OntologyWrapper\reference</a></td><td><em><p>Data kind.</p></em></td></tr><tr><th>$theOffset</th><td>string</td><td><em><p>Current offset.</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>mixed</td><td>&lt;tt&gt;TRUE&lt;/tt&gt; value was cast.</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td><a href="../files/Exception.html">\OntologyWrapper\Exception</a></td><td><em></em></td></tr></table><strong>Details</strong><dl class="function-info"><dt>Access</dt><dd>protected
         
    </dd></dl></div><div class="clear"></div></div><a id="\OntologyWrapper\OntologyObject::traverseCollectOffset()" class="anchor"></a><div class="method protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img><span class="highlight">traverseCollectOffset</span><span class="nb-faded-text">(<a href="../files/Iterator.html">\OntologyWrapper\Iterator</a> $theIterator, <a href="../files/reference.html">\OntologyWrapper\reference</a> $theOffsets, <a href="../files/reference.html">\OntologyWrapper\reference</a> $thePath, <a href="../files/reference.html">\OntologyWrapper\reference</a> $theType, <a href="../files/reference.html">\OntologyWrapper\reference</a> $theKind)</span> : string</code><div class="description"><p class="short_description">Collect offsets</p></div><div class="code-tabs"><div class="long-description">This method will be called for each offset of the current object structure, its duty
is to collect the list of offsets and tag references.

The method expects the following parameters:

<ul>
<li><b>$theIterator</b>: This parameter is the iterator pointing to the current
	traversal element, this element must be an offset and not an offset sub-element.
<li><b>$theOffsets</b>: This reference parameter will receive the offsets list, it
	is an array of elements structured as follows:
 <ul>
	<li><tt>key</tt>: The tag serial number.
	<li><tt>value</tt>: The list of object offsets in which the tag is used.
 </ul>
<li><b>$thePath</b>: This reference parameter will receive the current offset path.
<li><b>$theType</b>: This parameter will receive the data type of the referenced
	tag, if the tag could not be resolved, the parameter will hold an empty array.
<li><b>$theKind</b>: This parameter will receive the data kind of the referenced
	tag, if the tag could not be resolved, or if the tag has no data kind, the
	parameter will hold an empty array.
</ul>

The method will return the current offset.</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$theIterator</th><td><a href="../files/Iterator.html">\OntologyWrapper\Iterator</a></td><td><em><p>Iterator.</p></em></td></tr><tr><th>$theOffsets</th><td><a href="../files/reference.html">\OntologyWrapper\reference</a></td><td><em><p>Receives the offsets list.</p></em></td></tr><tr><th>$thePath</th><td><a href="../files/reference.html">\OntologyWrapper\reference</a></td><td><em><p>Receives the current path.</p></em></td></tr><tr><th>$theType</th><td><a href="../files/reference.html">\OntologyWrapper\reference</a></td><td><em><p>Receives data type.</p></em></td></tr><tr><th>$theKind</th><td><a href="../files/reference.html">\OntologyWrapper\reference</a></td><td><em><p>Receives data kind.</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>string</td><td>Current offset.</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td><a href="../files/Exception.html">\OntologyWrapper\Exception</a></td><td><em></em></td></tr></table><strong>Details</strong><dl class="function-info"><dt>Access</dt><dd>protected
         
    </dd></dl></div><div class="clear"></div></div><a id="\OntologyWrapper\OntologyObject::traverseOffsets()" class="anchor"></a><div class="method protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img><span class="highlight">traverseOffsets</span><span class="nb-faded-text">(<a href="../files/Iterator.html">\OntologyWrapper\Iterator</a> $theIterator, <a href="../files/reference.html">\OntologyWrapper\reference</a> $theOffsets, <a href="../files/reference.html">\OntologyWrapper\reference</a> $thePath)</span> : boolean</code><div class="description"><p class="short_description">Handle offset value</p></div><div class="code-tabs"><div class="long-description">This method will be called for each offset of the current object structure, its duty
is to:

<ul>
<li><em>Collect offset paths</em>. The method will fill the <em>$theOffsets</em>
	parameter with the list of tags and offsets used in the object, this array will
	be structured as follows:
 <ul>
	<li><tt>key</tt>: The tag serial number.
	<li><tt>value</tt>: The list of object offsets in which the tag is used.
 </ul>
<li><em>Verify offset values</em>. The method will verify if the offset value
	contains the correct structure and will cast the value to the correct type.
</ul>

The method expects the following parameters:

<ul>
<li><b>$theIterator</b>: This parameter is the iterator pointing to the current
	traversal element.
<li><b>$theOffsets</b>: This reference parameter will receive the offsets list.
<li><b>$thePath</b>: This reference parameter will receive the current offset path.
</ul></div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$theIterator</th><td><a href="../files/Iterator.html">\OntologyWrapper\Iterator</a></td><td><em><p>Iterator.</p></em></td></tr><tr><th>$theOffsets</th><td><a href="../files/reference.html">\OntologyWrapper\reference</a></td><td><em><p>Receives the offsets list.</p></em></td></tr><tr><th>$thePath</th><td><a href="../files/reference.html">\OntologyWrapper\reference</a></td><td><em><p>Receives the current path.</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>boolean</td><td>&lt;tt&gt;TRUE&lt;/tt&gt;, or &lt;tt&gt;FALSE&lt;/tt&gt; to stop the traversal.</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td><a href="../files/Exception.html">\OntologyWrapper\Exception</a></td><td><em></em></td></tr></table><strong>Details</strong><dl class="function-info"><dt>Access</dt><dd>protected
         
    </dd></dl></div><div class="clear"></div></div><a id="\OntologyWrapper\OntologyObject::traverseVerifyStructure()" class="anchor"></a><div class="method protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img><span class="highlight">traverseVerifyStructure</span><span class="nb-faded-text">(<a href="../files/Iterator.html">\OntologyWrapper\Iterator</a> $theIterator, <a href="../files/reference.html">\OntologyWrapper\reference</a> $theType, <a href="../files/reference.html">\OntologyWrapper\reference</a> $theKind, string $theOffset)</span> : boolean</code><div class="description"><p class="short_description">Verify offset</p></div><div class="code-tabs"><div class="long-description">This method should verify that the current element of the provided iterator has the
correct structure and content.

In this class we verify whether lists, structures and structured types are indeed
arrays and raise an exception if that is not the case. Note that we only check
structured data types if the offset has a single data type.

The method will return <tt>TRUE</tt> if the offset value is either a structure or a
list, and <tt>FALSE</tt> if the offset value is a scalar data type; in derived
classes you can call the parent method and perform custom checks if the parent method
returned <tt>FALSE</tt>.</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$theIterator</th><td><a href="../files/Iterator.html">\OntologyWrapper\Iterator</a></td><td><em><p>Iterator.</p></em></td></tr><tr><th>$theType</th><td><a href="../files/reference.html">\OntologyWrapper\reference</a></td><td><em><p>Data type.</p></em></td></tr><tr><th>$theKind</th><td><a href="../files/reference.html">\OntologyWrapper\reference</a></td><td><em><p>Data kind.</p></em></td></tr><tr><th>$theOffset</th><td>string</td><td><em><p>Current offset.</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>boolean</td><td>&lt;tt&gt;TRUE&lt;/tt&gt; if structure or list.</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td><a href="../files/Exception.html">\OntologyWrapper\Exception</a></td><td><em></em></td></tr></table><strong>Details</strong><dl class="function-info"><dt>Access</dt><dd>protected
         
    </dd></dl></div><div class="clear"></div></div><a id="\OntologyWrapper\OntologyObject::traverseVerifyValue()" class="anchor"></a><div class="method protected"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_protected.png" style="margin-right: 5px" alt="protected"></img><span class="highlight">traverseVerifyValue</span><span class="nb-faded-text">(<a href="../files/Iterator.html">\OntologyWrapper\Iterator</a> $theIterator, <a href="../files/reference.html">\OntologyWrapper\reference</a> $theType, <a href="../files/reference.html">\OntologyWrapper\reference</a> $theKind, string $theOffset)</span> : boolean</code><div class="description"><p class="short_description">Verify offset value</p></div><div class="code-tabs"><div class="long-description">This method should verify the current offset value, this method is called by the
{@link traverseVerifyStructure()} method if the current offset is not a structure or a list.

In this class we assert that structured types are arrays if there is only one offset
type.

The method will return <tt>NULL</tt> if the offset has more than one type,
<tt>TRUE</tt> if the value type was verified and <tt>FALSE</tt> if it was not
verified.</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$theIterator</th><td><a href="../files/Iterator.html">\OntologyWrapper\Iterator</a></td><td><em><p>Iterator.</p></em></td></tr><tr><th>$theType</th><td><a href="../files/reference.html">\OntologyWrapper\reference</a></td><td><em><p>Data type.</p></em></td></tr><tr><th>$theKind</th><td><a href="../files/reference.html">\OntologyWrapper\reference</a></td><td><em><p>Data kind.</p></em></td></tr><tr><th>$theOffset</th><td>string</td><td><em><p>Current offset.</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>boolean</td><td>&lt;tt&gt;NULL&lt;/tt&gt;, &lt;tt&gt;TRUE&lt;/tt&gt; or &lt;tt&gt;FALSE&lt;/tt&gt;.</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td><a href="../files/Exception.html">\OntologyWrapper\Exception</a></td><td><em></em></td></tr></table><strong>Details</strong><dl class="function-info"><dt>Access</dt><dd>protected
         
    </dd></dl></div><div class="clear"></div></div></div></div></div><small class="footer">
            Documentation was generated by
            <a href="http://phpdoc.org">phpDocumentor
                2.2.0
</a>.
        </small></body></html>
